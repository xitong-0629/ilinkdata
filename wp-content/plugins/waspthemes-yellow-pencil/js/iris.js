!function(i,r){function t(r,t){return r="top"===r?"top":"left",t=i.isArray(t)?t:Array.prototype.slice.call(arguments,1),"webkit"===a?(l=[],s="top"===(s=r)?"0% 0%,0% 100%,":"0% 100%,100% 100%,",o=e(o=t),i.each(o,function(i,r){l.push("color-stop("+parseFloat(r.stop)/100+", "+r.color+")")}),"-webkit-gradient(linear,"+s+l.join(",")+")"):n[a]+"linear-gradient("+r+", "+t.join(", ")+")";var s,o,l}function e(r){var t=[],e=[],s=[],o=r.length-1;return i.each(r,function(i,r){var s=r,o=!1,a=r.match(/1?[0-9]{1,2}%$/);a&&(s=r.replace(/\s?1?[0-9]{1,2}%$/,""),o=a.shift()),t.push(s),e.push(o)}),!1===e[0]&&(e[0]="0%"),!1===e[o]&&(e[o]="100%"),e=function r(t){var e,s,o,a,n=0,l=t.length-1,c=0,p=!1;if(t.length<=2||i.inArray(!1,t)<0)return t;for(;c<t.length-1;)p||!1!==t[c]?p&&!1!==t[c]&&(l=c,c=t.length):(n=c-1,p=!0),c++;for(s=l-n,a=parseInt(t[n].replace("%"),10),e=(parseFloat(t[l].replace("%"))-a)/s,c=n+1,o=1;l>c;)t[c]=a+o*e+"%",o++,c++;return r(t)}(e),i.each(e,function(i){s[i]={color:t[i],stop:e[i]}}),s}var s,o,a,n,l,c,p,h;s='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>','.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}',c=navigator.userAgent.toLowerCase(),p="Microsoft Internet Explorer"===navigator.appName,h=p?parseFloat(c.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,a=!1,n=["-moz-","-webkit-","-o-","-ms-"],(o=p&&10>h)&&7>=h?(i.fn.iris=i.noop,i.support.iris=!1):(i.support.iris=!0,i.fn.gradient=function(){var r=arguments;return this.each(function(){o?function(r,t){var s,o,a,n,l;r="top"===r?"top":"left",t=i.isArray(t)?t:Array.prototype.slice.call(arguments,1),s="top"===r?0:1,o=i(this),a=t.length-1,n='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1===s?"height":"width")+":100%;"+(1===s?"left":"top")+":%start%;"+(1===s?"right":"bottom")+':%end%;filter:%filter%;" data-color:"%color%"></div>',l="","static"===o.css("position")&&o.css({position:"relative"}),t=e(t),i.each(t,function(i,r){var e,o,c;return i!==a&&(e=t[i+1],void(r.stop!==e.stop&&(o=100-parseFloat(e.stop)+"%",r.octoHex=new Color(r.color).toIEOctoHex(),e.octoHex=new Color(e.color).toIEOctoHex(),c="progid:DXImageTransform.Microsoft.Gradient(GradientType="+s+", StartColorStr='"+r.octoHex+"', EndColorStr='"+e.octoHex+"')",l+=n.replace("%start%",r.stop).replace("%end%",o).replace("%filter%",c))))}),o.find(".iris-ie-gradient-shim").remove(),i(l).prependTo(o)}.apply(this,r):i(this).css("backgroundImage",t.apply(this,r))})},i.fn.raninbowGradient=function(r,t){var e,s,o,a;for(r=r||"top",s="hsl(%h%,"+(e=i.extend({},{s:100,l:50},t)).s+"%,"+e.l+"%)",o=0,a=[];360>=o;)a.push(s.replace("%h%",o)),o+=30;return this.each(function(){i(this).gradient(r,a)})},l={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var r,t,e=this,l=e.element,u=e.options.color||l.val();!1===a&&(t="backgroundImage",o?a="filter":(r=i('<div id="iris-gradtest" />'),i.each(n,function(i,e){return r.css(t,e+"linear-gradient(top,#fff,#000)"),r.css(t).match("gradient")?(a=i,!1):void 0}),!1===a&&(r.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),r.css(t).match("gradient")&&(a="webkit")),r.remove())),l.is("input")?(e.picker=e.options.target?i(s).appendTo(e.options.target):i(s).insertAfter(l),e._addInputListeners(l)):(l.append(s),e.picker=l.find(".iris-picker")),p?9===h?e.picker.addClass("iris-ie-9"):8>=h&&e.picker.addClass("iris-ie-lt9"):c.indexOf("compatible")<0&&c.indexOf("khtml")<0&&c.match(/mozilla/)&&e.picker.addClass("iris-mozilla"),e.options.palettes&&e._addPalettes(),e._color=new Color(u).setHSpace(e.options.mode),e.options.color=e._color.toString(),e.controls={square:e.picker.find(".iris-square"),squareDrag:e.picker.find(".iris-square-value"),horiz:e.picker.find(".iris-square-horiz"),vert:e.picker.find(".iris-square-vert"),strip:e.picker.find(".iris-strip"),stripSlider:e.picker.find(".iris-strip .iris-slider-offset")},"hsv"===e.options.mode&&e._has("l",e.options.controls)?e.options.controls=e._defaultHSVControls:"hsl"===e.options.mode&&e._has("v",e.options.controls)&&(e.options.controls=e._defaultHSLControls),e.hue=e._color.h(),e.options.hide&&e.picker.hide(),e.options.border&&e.picker.addClass("iris-border"),e._initControls(),e.active="external",e._dimensions(),e._change()},_has:function(r,t){var e=!1;return i.each(t,function(i,t){return r===t?(e=!0,!1):void 0}),e},_addPalettes:function(){var r=i('<div class="iris-palette-container" />'),t=i('<a class="iris-palette" tabindex="0" />'),e=i.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(r=this.picker.find(".iris-palette-container").detach().html("")),i.each(e,function(i,e){t.clone().data("color",e).css("backgroundColor",e).appendTo(r).height(10).width(10)}),this.picker.append(r)},_paint:function(){this._paintDimension("top","strip"),this._paintDimension("top","vert"),this._paintDimension("left","horiz")},_paintDimension:function(i,r){var t,e=this,s=e._color,o=e.options.mode,a=e._getHSpaceColor(),n=e.controls[r],l=e.options.controls;if(r!==e.active&&("square"!==e.active||"strip"===r))switch(l[r]){case"h":if("hsv"===o){switch(a=s.clone(),r){case"horiz":a[l.vert](100);break;case"vert":a[l.horiz](100);break;case"strip":a.setHSpace("hsl")}t=a.toHsl()}else t="strip"===r?{s:a.s,l:a.l}:{s:100,l:a.l};n.raninbowGradient(i,t);break;case"s":"hsv"===o?"vert"===r?t=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===r?t=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===r&&(t=["#fff","hsl("+a.h+",100%,50%)"]):t="vert"===r&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+a.l+"%, 0)","hsla(0, 0%, "+a.l+"%, 1)"]:["hsl("+a.h+",0%,50%)","hsl("+a.h+",100%,50%)"],n.gradient(i,t);break;case"l":t="strip"===r?["hsl("+a.h+",100%,100%)","hsl("+a.h+", "+a.s+"%,50%)","hsl("+a.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],n.gradient(i,t);break;case"v":t="strip"===r?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],n.gradient(i,t)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(r){var t,e,s,o=this,a=o.options,n=o.controls.square,l=o.picker.find(".iris-strip"),c="77.5%",p="12%",h=a.border?a.width-20:a.width,u=i.isArray(a.palettes)?a.palettes.length:o._palettes.length;return r&&(n.css("width",""),l.css("width",""),o.picker.css({width:"",height:""})),c=h*(parseFloat(c)/100),p=h*(parseFloat(p)/100),t=a.border?c+20:c,n.width(c).height(c),l.height(c).width(p),o.picker.css({width:a.width,height:t}),a.palettes?(s=(c-(u-1)*(e=2*c/100))/u,o.picker.find(".iris-palette").each(function(r){var t=0===r?0:e;i(this).css({width:s,height:s,marginLeft:t})}),o.picker.css("paddingBottom",s+e),void l.height(s+e+c)):o.picker.css("paddingBottom","")},_addInputListeners:function(i){var r=this,t=function(t){var e=new Color(i.val()),s=i.val().replace(/^#/,"");i.removeClass("iris-error"),e.error?""!==s&&i.addClass("iris-error"):e.toString()!==r._color.toString()&&("keyup"===t.type&&s.match(/^[0-9a-fA-F]{3}$/)||r._setOption("color",e.toString()))};i.on("change",t).on("keyup",r._debounce(t,100)),r.options.hide&&i.one("focus",function(){r.show()})},_initControls:function(){var r=this,t=r.controls,e=t.square,s=r.options.controls,o=r._scale[s.strip];t.stripSlider.slider({orientation:"vertical",max:o,slide:function(i,t){r.active="strip","h"===s.strip&&(t.value=o-t.value),r._color[s.strip](t.value),r._change.apply(r,arguments)}}),t.squareDrag.draggable({containment:t.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(i,t){r._squareDrag(i,t)},start:function(){e.addClass("iris-dragging"),i(this).addClass("ui-state-focus")},stop:function(){e.removeClass("iris-dragging"),i(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(t){var e="ui-state-focus";t.preventDefault(),"mousedown"===t.type?(r.picker.find("."+e).removeClass(e).blur(),i(this).addClass(e).focus()):i(this).removeClass(e)}).on("keydown",function(i){var e=t.square,s=t.squareDrag,o=s.position(),a=r.options.width/100;switch(i.altKey&&(a*=10),i.keyCode){case 37:o.left-=a;break;case 38:o.top-=a;break;case 39:o.left+=a;break;case 40:o.top+=a;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),r._squareDrag(i,{position:o}),i.preventDefault()}),e.mousedown(function(t){var e,s;1===t.which&&i(t.target).is("div")&&(e=r.controls.square.offset(),s={top:t.pageY-e.top,left:t.pageX-e.left},t.preventDefault(),r._squareDrag(t,{position:s}),t.target=r.controls.squareDrag.get(0),r.controls.squareDrag.css(s).trigger(t))}),r.options.palettes&&r._paletteListeners()},_paletteListeners:function(){var r=this;r.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){r._color.fromCSS(i(this).data("color")),r.active="external",r._change()}).on("keydown.palette",".iris-palette",function(r){return 13!==r.keyCode&&32!==r.keyCode||(r.stopPropagation(),void i(this).click())})},_squareDrag:function(i,r){var t=this,e=t.options.controls,s=t._squareDimensions(),o=Math.round((s.h-r.position.top)/s.h*t._scale[e.vert]),a=t._scale[e.horiz]-Math.round((s.w-r.position.left)/s.w*t._scale[e.horiz]);t._color[e.horiz](a)[e.vert](o),t.active="square",t._change.apply(t,arguments)},_setOption:function(r,t){var e,s,o=this,a=o.options[r],n=!1;switch(o.options[r]=t,r){case"color":(t=""+t).replace(/^#/,""),(e=new Color(t).setHSpace(o.options.mode)).error?o.options[r]=a:(o._color=e,o.options.color=o.options[r]=o._color.toString(),o.active="external",o._change());break;case"palettes":n=!0,t?o._addPalettes():o.picker.find(".iris-palette-container").remove(),a||o._paletteListeners();break;case"width":n=!0;break;case"border":n=!0,s=t?"addClass":"removeClass",o.picker[s]("iris-border");break;case"mode":case"controls":if(a===t)return;return s=o.element,(a=o.options).hide=!o.picker.is(":visible"),o.destroy(),o.picker.remove(),i(o.element).iris(a)}n&&o._dimensions(!0)},_squareDimensions:function(i){var t,e=this.controls.square;return i!==r&&e.data("dimensions")?e.data("dimensions"):(this.controls.squareDrag,t={w:e.width(),h:e.height()},e.data("dimensions",t),t)},_isNonHueControl:function(i,r){return"square"===i&&"h"===this.options.controls.strip||"external"!==r&&("h"!==r||"strip"!==i)},_change:function(){var r=this,t=r.controls,e=r._getHSpaceColor(),s=["square","strip"],o=r.options.controls,a=o[r.active]||"external",n=r.hue;"strip"===r.active?s=[]:"external"!==r.active&&s.pop(),i.each(s,function(i,s){var a,n,l;if(s!==r.active)switch(s){case"strip":a="h"===o.strip?r._scale[o.strip]-e[o.strip]:e[o.strip],t.stripSlider.slider("value",a);break;case"square":n=r._squareDimensions(),l={left:e[o.horiz]/r._scale[o.horiz]*n.w,top:n.h-e[o.vert]/r._scale[o.vert]*n.h},r.controls.squareDrag.css(l)}}),e.h!==n&&r._isNonHueControl(r.active,a)&&r._color.h(n),r.hue=r._color.h(),r.options.color=r._color.toString(),r._inited&&r._trigger("change",{type:r.active},{color:r._color}),r.element.is(":input")&&!r._color.error&&(r.element.removeClass("iris-error"),r.element.val()!==r._color.toString()&&r.element.val(r._color.toString())),r._paint(),r._inited=!0,r.active=!1},_debounce:function(i,r,t){var e,s;return function(){var o,a,n=this,l=arguments;return o=function(){e=null,t||(s=i.apply(n,l))},a=t&&!e,clearTimeout(e),e=setTimeout(o,r),a&&(s=i.apply(n,l)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(i){return!0===i?this._color.clone():i===r?this._color.toString():void this.option("color",i)}},i.widget("a8c.iris",l),i('<style id="iris-css">.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}</style>').appendTo("head"))}(jQuery),function(i,r){var t=function(i,r){return this instanceof t?this._init(i,r):new t(i,r)};t.fn=t.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(i){var t="noop";switch(typeof i){case"object":return i.a!==r&&this.a(i.a),this[t=i.r!==r?"fromRgb":i.l!==r?"fromHsl":i.v!==r?"fromHsv":t](i);case"string":return this.fromCSS(i);case"number":return this.fromInt(parseInt(i,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var i=new t(this.toInt()),r=["_alpha","_hSpace","_hsl","_hsv","error"],e=r.length-1;e>=0;e--)i[r[e]]=this[r[e]];return i},setHSpace:function(i){return this._hSpace="hsv"===i?i:"hsl",this},noop:function(){return this},fromCSS:function(i){var r,t=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(i=i.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(t)&&i.match(/\)$/)){if((r=i.replace(/(\s|%)/g,"").replace(t,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===r.length&&(this.a(parseFloat(r.pop())),this.error))return this;for(var e=r.length-1;e>=0;e--)if(r[e]=parseInt(r[e],10),isNaN(r[e]))return this._error();return i.match(/^rgb/)?this.fromRgb({r:r[0],g:r[1],b:r[2]}):i.match(/^hsv/)?this.fromHsv({h:r[0],s:r[1],v:r[2]}):this.fromHsl({h:r[0],s:r[1],l:r[2]})}return this.fromHex(i)},fromRgb:function(i,t){return"object"!=typeof i||i.r===r||i.g===r||i.b===r?this._error():(this.error=!1,this.fromInt(parseInt((i.r<<16)+(i.g<<8)+i.b,10),t))},fromHex:function(i){return 3===(i=i.replace(/^#/,"").replace(/^0x/,"")).length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),this.error=!/^[0-9A-F]{6}$/i.test(i),this.fromInt(parseInt(i,16))},fromHsl:function(i){var t,e,s,o,a,n,l,c;return"object"!=typeof i||i.h===r||i.s===r||i.l===r?this._error():(this._hsl=i,this._hSpace="hsl",n=i.h/360,l=i.s/100,c=i.l/100,0===l?t=e=s=c:(a=2*c-(o=.5>c?c*(1+l):c+l-c*l),t=this.hue2rgb(a,o,n+1/3),e=this.hue2rgb(a,o,n),s=this.hue2rgb(a,o,n-1/3)),this.fromRgb({r:255*t,g:255*e,b:255*s},!0))},fromHsv:function(i){var t,e,s,o,a,n,l,c,p,h,u;if("object"!=typeof i||i.h===r||i.s===r||i.v===r)return this._error();switch(this._hsv=i,this._hSpace="hsv",t=i.h/360,e=i.s/100,p=(s=i.v/100)*(1-e),h=s*(1-(c=6*t-(l=Math.floor(6*t)))*e),u=s*(1-(1-c)*e),l%6){case 0:o=s,a=u,n=p;break;case 1:o=h,a=s,n=p;break;case 2:o=p,a=s,n=u;break;case 3:o=p,a=h,n=s;break;case 4:o=u,a=p,n=s;break;case 5:o=s,a=p,n=h}return this.fromRgb({r:255*o,g:255*a,b:255*n},!0)},fromInt:function(i,t){return this._color=parseInt(i,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===r&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(i,r,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?i+6*(r-i)*t:.5>t?r:2/3>t?i+6*(r-i)*(2/3-t):i},toString:function(){var i=parseInt(this._color,10).toString(16);if(this.error)return"";if(i.length<6)for(var r=6-i.length-1;r>=0;r--)i="0"+i;return"#"+i},toCSS:function(i,r){switch(i=i||"hex",r=parseFloat(r||this._alpha),i){case"rgb":case"rgba":var t=this.toRgb();return 1>r?"rgba( "+t.r+", "+t.g+", "+t.b+", "+r+" )":"rgb( "+t.r+", "+t.g+", "+t.b+" )";case"hsl":case"hsla":var e=this.toHsl();return 1>r?"hsla( "+e.h+", "+e.s+"%, "+e.l+"%, "+r+" )":"hsl( "+e.h+", "+e.s+"%, "+e.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var i,r,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),l=(a+n)/2;if(a===n)i=r=0;else{var c=a-n;switch(r=l>.5?c/(2-a-n):c/(a+n),a){case e:i=(s-o)/c+(o>s?6:0);break;case s:i=(o-e)/c+2;break;case o:i=(e-s)/c+4}i/=6}return 0===(i=Math.round(360*i))&&this._hsl.h!==i&&(i=this._hsl.h),0===(r=Math.round(100*r))&&this._hsl.s&&(r=this._hsl.s),{h:i,s:r,l:Math.round(100*l)}},toHsv:function(){var i,r,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),l=a,c=a-n;if(r=0===a?0:c/a,a===n)i=r=0;else{switch(a){case e:i=(s-o)/c+(o>s?6:0);break;case s:i=(o-e)/c+2;break;case o:i=(e-s)/c+4}i/=6}return 0===(i=Math.round(360*i))&&this._hsv.h!==i&&(i=this._hsv.h),0===(r=Math.round(100*r))&&this._hsv.s&&(r=this._hsv.s),{h:i,s:r,v:Math.round(100*l)}},toInt:function(){return this._color},toIEOctoHex:function(){var i=this.toString(),r=parseInt(255*this._alpha,10).toString(16);return 1===r.length&&(r="0"+r),"#"+r+i.replace(/^#/,"")},toLuminosity:function(){var i=this.toRgb();return.2126*Math.pow(i.r/255,2.2)+.7152*Math.pow(i.g/255,2.2)+.0722*Math.pow(i.b/255,2.2)},getDistanceLuminosityFrom:function(i){if(!(i instanceof t))throw"getDistanceLuminosityFrom requires a Color object";var r=this.toLuminosity(),e=i.toLuminosity();return r>e?(r+.05)/(e+.05):(e+.05)/(r+.05)},getMaxContrastColor:function(){var i=this.toLuminosity();return new t(i>=.5?"000000":"ffffff")},getReadableContrastingColor:function(i,e){if(!i instanceof t)return this;var s=e===r?5:e,o=i.getDistanceLuminosityFrom(this),a=i.getMaxContrastColor();if(s>=a.getDistanceLuminosityFrom(i))return a;if(o>=s)return this;for(var n=0===a.toInt()?-1:1;s>o&&(this.l(n,!0),o=this.getDistanceLuminosityFrom(i),0!==this._color&&16777215!==this._color););return this},a:function(i){if(i===r)return this._alpha;var t=parseFloat(i);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(i){return i=i||5,this.l(-i,!0)},lighten:function(i){return i=i||5,this.l(i,!0)},saturate:function(i){return i=i||15,this.s(i,!0)},desaturate:function(i){return i=i||15,this.s(-i,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(i){var r=180+30*(i=i||1);return this.h(r,!0)},getAnalog:function(i){var r=30*(i=i||1);return this.h(r,!0)},getTetrad:function(i){var r=60*(i=i||1);return this.h(r,!0)},getTriad:function(i){var r=120*(i=i||1);return this.h(r,!0)},_partial:function(i){var t=e[i];return function(e,s){var o=this._spaceFunc("to",t.space);return e===r?o[i]:(!0===s&&(e=o[i]+e),t.mod&&(e%=t.mod),t.range&&(e=e<t.range[0]?t.range[0]:e>t.range[1]?t.range[1]:e),o[i]=e,this._spaceFunc("from",t.space,o))}},_spaceFunc:function(i,r,t){var e=r||this._hSpace;return this[i+e.charAt(0).toUpperCase()+e.substr(1)](t)}};var e={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in e)e.hasOwnProperty(s)&&(t.fn[s]=t.fn._partial(s));"object"==typeof exports?module.exports=t:i.Color=t}(this),function(i,r,t,e){"use strict";void 0!==typeof Color.fn.toString&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var i=parseInt(this._color,10).toString(16);if(this.error)return"";if(i.length<6)for(var r=6-i.length-1;r>=0;r--)i="0"+i;return"#"+i}),i.cs_ParseColorValue=function(i){var r=i.replace(/\s+/g,""),t=-1!==r.indexOf("rgba")?parseFloat(100*r.replace(/^.*,(.+)\)/,"$1")):100;return{value:r,alpha:t,rgba:t<100}},i.fn.cs_iris=function(t){return this.each(function(){var e=i(this);if("color"==t)return e.iris(t),!1;if(!1!==e.data("rgba")){var s=i.cs_ParseColorValue(e.val());e.iris({hide:t.hide,width:parseFloat(t.width),change:function(i,t){var s=t.color.toString();e.parent().find(".wqminicolors-swatch-color").add(e.next(".iris-picker").find(".cs-alpha-slider-offset")).css("background-color",s),r.iris_global_change_callback(i,t)},create:function(){var r=e.data("a8cIris"),t=e.next(".iris-picker"),o=i('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div></div>').appendTo(t.find(".iris-picker-inner")),a=o.find(".cs-alpha-slider"),n=o.find(".cs-alpha-slider-offset");a.slider({slide:function(i,t){var s=parseFloat(t.value/100);r._color._alpha=s,e.iris("color",r._color.toString())},change:function(i,r){i.originalEvent&&e.trigger("change")},create:function(){parseFloat(s.alpha/100);n.css("background-color",s.value)},value:s.alpha,step:1,min:1,max:100})}})}else e.iris(t)})}}(jQuery,window,document);